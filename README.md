
# GeoVol 3D - Calculadora y Visualizador de Vol√∫menes Geom√©tricos

## 1. Descripci√≥n General
**GeoVol 3D** es una aplicaci√≥n web moderna (SaaS) desarrollada con React 19. Permite a ingenieros, estudiantes y dise√±adores construir objetos 3D complejos mediante el apilamiento de primitivas geom√©tricas, calculando en tiempo real sus propiedades f√≠sicas y visualizando el resultado tanto en planos t√©cnicos (2D) como en un entorno tridimensional interactivo (3D).

En su versi√≥n 2.0, incorpora capacidades de **nube**, permitiendo a los usuarios registrarse, guardar sus proyectos y gestionarlos desde un panel de control centralizado.

## 2. Caracter√≠sticas Principales

### ‚òÅÔ∏è Gesti√≥n de Proyectos en la Nube (Fase 2)
*   **Autenticaci√≥n Segura**: Sistema de Registro y Login integrado con Supabase.
*   **Dashboard de Proyectos**: Visualizaci√≥n de proyectos guardados con miniaturas generadas autom√°ticamente desde la vista 3D.
*   **Modo Invitado (Guest Mode)**: Permite utilizar el editor completo sin iniciar sesi√≥n. Si el usuario decide guardar, el sistema preserva su trabajo y lo redirige al flujo de registro (Guardado Diferido).
*   **Persistencia**: Almacenamiento de configuraciones de figuras, unidades y materiales en base de datos PostgreSQL.

### üõ†Ô∏è Modelado y Construcci√≥n
*   **Sistema de Capas**: Construcci√≥n secuencial de objetos.
*   **Primitivas Soportadas**: Cilindro, Cubo, Cono, Esfera, Cono Truncado, Pir√°mide, Prisma Rectangular.
*   **Edici√≥n Din√°mica**: Modificaci√≥n de altura, radios y dimensiones con actualizaci√≥n instant√°nea.

### üé® Visualizaci√≥n Dual Avanzada
*   **Vista T√©cnica 2D (Canvas API)**:
    *   Representaci√≥n esquem√°tica frontal con **Acotaci√≥n Autom√°tica**.
    *   **Auto-fit Reactivo**: Sistema inteligente que detecta cambios en dimensiones y reajusta el zoom autom√°ticamente.
*   **Vista Realista 3D (Three.js)**:
    *   **Captura de Miniaturas**: Generaci√≥n autom√°tica de screenshots para el dashboard.
    *   **Etiquetas Flotantes (CSS2D)**: Cotas de dimensi√≥n superpuestas al modelo 3D.
    *   **Persistencia de C√°mara**: Arquitectura optimizada que mantiene la posici√≥n del usuario al actualizar la geometr√≠a.

### ‚öñÔ∏è Motor de F√≠sica
*   **C√°lculo de Volumen**: Sumatoria precisa de vol√∫menes parciales.
*   **Materiales**: Base de datos de densidades (Acero, Madera, Hormig√≥n, Oro, etc.) y soporte para densidad personalizada.
*   **Masa y Peso**: C√°lculo autom√°tico de masa (kg) y fuerza/peso (N).

### üíæ Gesti√≥n de Datos Local
*   **Historial**: Deshacer/Rehacer (Undo/Redo) con atajos de teclado (`Ctrl+Z`).
*   **Importaci√≥n/Exportaci√≥n**: Soporte para archivos JSON que incluyen geometr√≠a y configuraci√≥n de materiales.

---

## 3. Arquitectura y Patrones de Dise√±o

El proyecto sigue una arquitectura modular y escalable:

*   **Enrutamiento de Estado**: `App.tsx` act√∫a como un router ligero gestionando las vistas (`LANDING`, `AUTH`, `DASHBOARD`, `EDITOR`) y el estado de la sesi√≥n.
*   **Patr√≥n Estrategia (Strategy Pattern)**: La l√≥gica de c√°lculo geom√©trico en `utils.ts` permite a√±adir nuevas figuras f√°cilmente.
*   **Custom Hooks**: `useFigureManager` encapsula toda la l√≥gica de manipulaci√≥n de figuras e historial.
*   **Optimizaci√≥n Gr√°fica**: Gesti√≥n manual de recursos en Three.js para evitar fugas de memoria.

---

## 4. Configuraci√≥n del Backend (Supabase)

Para desplegar este proyecto, es necesario configurar un proyecto en Supabase y ejecutar el siguiente script SQL en el Editor SQL para crear la estructura de base de datos necesaria:

```sql
-- 1. Crear tabla de proyectos
create table projects (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  name text not null,
  description text,
  data jsonb not null, -- Almacena el array de figuras
  thumbnail text, -- Almacena la imagen en base64
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 2. Habilitar seguridad (Row Level Security)
alter table projects enable row level security;

-- 3. Crear pol√≠ticas de acceso (CRUD solo para el propietario)
create policy "Users can view their own projects" on projects for select using (auth.uid() = user_id);
create policy "Users can insert their own projects" on projects for insert with check (auth.uid() = user_id);
create policy "Users can update their own projects" on projects for update using (auth.uid() = user_id);
create policy "Users can delete their own projects" on projects for delete using (auth.uid() = user_id);
```

Luego, actualice el archivo `src/supabaseClient.ts` con sus credenciales:

```typescript
const SUPABASE_URL = 'SU_URL_DE_SUPABASE';
const SUPABASE_ANON_KEY = 'SU_CLAVE_ANONIMA';
```

---

## 5. Estructura del Proyecto

### Componentes Clave (`/src/components`)

*   **`Auth.tsx`**: Maneja el registro e inicio de sesi√≥n.
*   **`Dashboard.tsx`**: Panel principal para usuarios autenticados. Lista proyectos y permite crear nuevos o eliminar existentes.
*   **`Editor.tsx`**: El n√∫cleo de la aplicaci√≥n. Contiene el lienzo de trabajo, integraci√≥n con visualizadores y l√≥gica de guardado.
*   **`Viewer3D.tsx`**: Motor gr√°fico. Expone m√©todos imperativos (`captureScreenshot`) mediante `forwardRef` para generar las miniaturas del dashboard.
*   **`LandingPage.tsx`**: P√°gina de entrada optimizada para conversi√≥n.

---

## 6. Tecnolog√≠as

*   **Frontend**: React 19, TypeScript.
*   **Backend / BaaS**: Supabase (PostgreSQL + Auth).
*   **Gr√°ficos**: Three.js, CSS2DRenderer.
*   **Estilos**: Tailwind CSS v3.4.

---

## 7. Cr√©ditos

**Dise√±o y Desarrollo**: Daniel Alvarado  
**A√±o**: 2025
